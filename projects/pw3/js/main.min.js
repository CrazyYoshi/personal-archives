function DatetimeToJsDate(e){var t=e.split("-"),r=t[0],o=(Number(t[1])-1).toString(),i=t[2].split(" "),n=i[0],a=i[1].split(":"),s=a[0],l=a[1],c=a[2].split("."),u=c[0],p=c[1];return new Date(r,o,n,s,l,u,p)}function DateSQLToJsDate(e){var t=e.split("-"),r=t[0],o=(Number(t[1])-1).toString(),i=t[2];return new Date(r,o,i)}function wildSearch(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}var app=angular.module("NewDawn",["ui.router","ngAnimate","ngSanitize","ngTouch","newDawnCtrl"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){t.otherwise("home"),r.html5Mode(!0),e.state("home",{controller:"HomeCtrl",url:"/home",templateUrl:"assets/partials/home.html"}).state("me",{controller:"MeCtrl",url:"/me",templateUrl:"assets/partials/me.html"}).state("portfolio",{controller:"PortfolioCtrl",url:"/portfolio",templateUrl:"assets/partials/portfolio.html"}).state("experience",{controller:"ExperienceCtrl",url:"/experience",templateUrl:"assets/partials/experience.html"}).state("contact",{controller:"ContactCtrl",url:"/contact",templateUrl:"assets/partials/contact.html"}).state("roadmap",{controller:"RoadmapCtrl",url:"/roadmap",templateUrl:"assets/partials/roadmap.html"})}]),app.run(["$rootScope","$http","$interval",function(e,t,r){e.rootUrl="",e.bgImages="",t.get(e.rootUrl+"/php/returnBGimages.php").then(function(t){e.bgImages=t.data},function(e){}),e.actual=0,r(function(){e.actual=e.actual+1>e.bgImages.length-1?0:e.actual+1},2e4)}]),app.filter("filterPortfolio",function(){return function(e,t,r){return r=void 0===r||r,e.filter(function(e){var o=[],i=[];i.push(e.title.toLowerCase()),i.push(e.description.toLowerCase()),angular.forEach(e.skills,function(e){i.push(e.name.toLowerCase())}),angular.forEach(e.tags,function(e){i.push(e.name.toLowerCase())});var n=i.join(" ");if(t.length>0){for(var a in t){var s=t[a].toLowerCase();if(n.indexOf(s)!==-1&&(o.push(t[a]),!r))return!0}return!(o.length!==t.length||!r)}return!0})}});var ctrl=angular.module("newDawnCtrl",[]),meLeisuresResize=function(){var e=$("#leisures-bg"),t=$("#leisures-text"),r=(parseInt(t.css("padding-bottom")),t.outerHeight(!0));e.height(r)},openCloseMenu=function(e){e=e||!1,console.log("Launched"),console.log(e);var t=$("#hamburger"),r=$("#unroll"),o=$("nav");$("#unroll a");t.hasClass("active")||r.hasClass("active")||e?(t.removeClass("active"),o.removeClass("active"),r.removeClass("active")):(t.addClass("active"),o.addClass("active"),r.addClass("active"))};$(function(){$("#unroll a").click(function(){openCloseMenu(!0)})}),ctrl.controller("ContactCtrl",["$scope","$http","$rootScope","$sce",function(e,t,r,o){r.footer="Une animation viendra dynamiser le tout !",e.reset={name:"",email:"",subject:"",mail:""},e.send=function(){t({method:"POST",url:r.rootUrl+"/php/sendMail.php",data:$.param(e.maildata),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){var r=t.data;r.success?(e.maildata=angular.copy(e.reset),e.response=r.success):e.response=r.error},function(t){e.response="Soucis technique, le mail est même pas arrivé jusqu'au serveur, la loose"})}}]),ctrl.controller("ExperienceCtrl",["$scope","$http","$rootScope",function(e,t,r){r.footer="Peu d'expériences mais très curieux !",e.experiences="",t.get(r.rootUrl+"/php/returnExperience.php").then(function(t){e.experiences=t.data},function(e){}),e.openedIndex=-1,e.open=function(t){e.openedIndex!=t?e.openedIndex=t:e.openedIndex=-1},e.formatDateString=function(e){var t={year:"numeric",month:"long",day:"numeric"},r=DateSQLToJsDate(e);return r.toLocaleString("fr-FR",t)}}]),ctrl.controller("HomeCtrl",["$scope","$state","$http","$rootScope",function(e,t,r,o){o.footer="Première version de cette refonte, des mises à jours sont prévues. Plus d'infos dans la section Roadmap.",e.infos="",r.get(o.rootUrl+"/php/returnInfos.php").then(function(t){e.infos=t.data},function(e){}),o.$state=t}]),ctrl.controller("MeCtrl",["$scope","$state","$http","$rootScope",function(e,t,r,o){e.calculateAge=function(e){var t=Date.now()-e.getTime(),r=new Date(t);return Math.abs(r.getUTCFullYear()-1970)},o.footer="Enchanté !",e.infos="",e.leisures="",r.get(o.rootUrl+"/php/returnInfos.php").then(function(t){e.infos=t.data},function(e){}),r.get(o.rootUrl+"/php/returnLeisures.php").then(function(t){t.data.forEach(function(t){e.leisures+=" • "+t.leisure_fr}),e.leisures+=e.leisures,e.leisures+=e.leisures},function(e){}),o.$state=t,$(document).ready(function(){meLeisuresResize(),$(window).resize(function(){meLeisuresResize()})})}]),ctrl.controller("PortfolioCtrl",["$scope","$http","$rootScope","$filter",function(e,t,r,o){r.footer="Cette section est en perpétuelle évolution.",e.viewerOn=!1,e.portfolio=[],e.skills=[],e.tags=[],e.search="",e.projectLimit=6,e.show=!1,e.FilterAndOr=!0,e.thereIsMore=!1,e.criterias=[],e.allTags=[],e.tagInitialLimit=10,e.tagLimit=e.tagInitialLimit,e.resetP={id:0,preview:"",original:"",tag:{},skills:{},description:"",title:"",date:new Date},e.p=e.resetP;var i=function(e,t){return o("filter")(e,t).length};t.get(r.rootUrl+"/php/returnPortfolio.php").then(function(t){e.portfolio=t.data.portfolio,e.skills=t.data.skills,e.tags=t.data.tags,e.thereIsMore=e.portfolio.length>e.projectLimit,console.log(e.thereIsMore),e.skills.forEach(function(t){t.occurence=i(e.portfolio,t.name),t.isActive=!1;var r={name:t.name,occurence:t.occurence,isActive:t.isActive,img:t.img};e.allTags.push(r)}),e.tags.forEach(function(t){t.occurence=i(e.portfolio,t.name),t.isActive=!1;var r={name:t.name,occurence:t.occurence,isActive:t.isActive,img:void 0!==typeof t.img&&""!==t.img&&t.img};e.allTags.push(r)})},function(e){}),e.updateFilter=function(){var t=e.search.replace(/\s+/g," ").split(" "),r=o("filter")(e.allTags,{isActive:!0});e.criterias=[],angular.forEach(r,function(t){e.criterias.push(t.name)}),e.search.length>0&&angular.forEach(t,function(t){var r=e.criterias.indexOf(t);0!==r&&e.criterias.push(t)})},e.showMore=function(){e.thereIsMore&&(e.projectLimit+=6),e.thereIsMore=e.portfolio.length>e.projectLimit},e.addRemoveSearchCriteria=function(t){if(e.criterias.indexOf(t)!==-1){var r=e.criterias.indexOf(t);e.criterias.splice(r,1),o("filter")(e.allTags,t)[0].isActive=!1}else e.criterias.push(t),o("filter")(e.allTags,t)[0].isActive=!0},e.resetCriteria=function(){e.criterias=[],e.search="",angular.forEach(e.allTags,function(e){e.isActive=!1})},e.more=function(){n(!0,6)},e.less=function(){e.tagLimit=e.tagInitialLimit},e.closeFilter=function(){e.show=!e.show;var t=o("orderBy")(o("filter")(e.allTags,{isActive:!0}),"-occurence"),r=t.length>0&&t[t.length-1];if(r!==!1){var i=o("orderBy")(e.allTags,"-occurence").indexOf(r);i+1<=e.tagInitialLimit?e.less():e.tagLimit=i+1}else e.less()};var n=function(t,r){t?e.tagLimit=e.tagLimit+r>e.allTags.length?e.allTags.length:e.tagLimit+r:e.tagLimit=e.tagLimit-r<e.tagInitialLimit?e.tagInitialLimit:e.tagLimit-r};e.openInViewer=function(t){e.p=t,e.viewerOn=!0},e.closeViewer=function(){e.viewerOn=!1,e.p=e.resetP}}]),ctrl.controller("RoadmapCtrl",["$scope","$state","$http","$rootScope",function(e,t,r,o){e.roadmaps=[],o.footer="Enchanté !",r.get(o.rootUrl+"/php/returnRoadmap.php").then(function(t){e.roadmaps=t.data},function(e){})}]);